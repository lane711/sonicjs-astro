---
import LoginLayout from '../layouts/admin-login.astro'
import { getSession } from 'auth-astro/server';

const session = await getSession(Astro.request);
---
<LoginLayout>
  <div class="text-white">
    <button id="login">Login</button>
    <button id="logout">Logout</button>
  

    {
      session ? (
        <p>Welcome {session.user?.name}</p>
      ) : (
        <p>Not logged in</p>
      )
    }
</div>
    <script>
      const { signIn, signOut } = await import("auth-astro/client")
      document.querySelector("#login").onclick = () => signIn("github")
      document.querySelector("#logout").onclick = () => signOut()
    </script>
  </LoginLayout>